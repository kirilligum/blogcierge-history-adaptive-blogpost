@astrojs/ sitemap
=================

v3.4.0 [GitHub](https://github.com/withastro/astro/tree/main/packages/integrations/sitemap/) [npm](https://www.npmjs.com/package/@astrojs/sitemap) [Changelog](https://github.com/withastro/astro/tree/main/packages/integrations/sitemap/CHANGELOG.md)

This **[Astro integration](/en/guides/integrations-guide/)** generates a sitemap based on your pages when you build your Astro project.

Why Astro Sitemap
-----------------

[Section titled Why Astro Sitemap](#why-astro-sitemap)

A Sitemap is an XML file that outlines all of the pages, videos, and files on your site. Search engines like Google read this file to crawl your site more efficiently. [See Google’s own advice on sitemaps](https://developers.google.com/search/docs/advanced/sitemaps/overview) to learn more.

A sitemap file is recommended for large multi-page sites. If you don’t use a sitemap, most search engines will still be able to list your site’s pages, but a sitemap is a great way to ensure that your site is as search engine friendly as possible.

With Astro Sitemap, you don’t have to worry about creating this XML file yourself: the Astro Sitemap integration will crawl your statically-generated routes and create the sitemap file, including [dynamic routes](/en/guides/routing/#dynamic-routes) like `[...slug]` or `src/pages/[lang]/[version]/info.astro` generated by `getStaticPaths()`.

This integration cannot generate sitemap entries for dynamic routes in [SSR mode](/en/guides/on-demand-rendering/).

Installation
------------

[Section titled Installation](#installation)

Astro includes an `astro add` command to automate the setup of official integrations. If you prefer, you can [install integrations manually](#manual-install) instead.

Run one of the following commands in a new terminal window.

(() => { class StarlightTabsRestore extends HTMLElement { connectedCallback() { const starlightTabs = this.closest('starlight-tabs'); if (!(starlightTabs instanceof HTMLElement) || typeof localStorage === 'undefined') return; const syncKey = starlightTabs.dataset.syncKey; if (!syncKey) return; const label = localStorage.getItem(\`starlight-synced-tabs\_\_${syncKey}\`); if (!label) return; const tabs = \[...starlightTabs?.querySelectorAll('\[role="tab"\]')\]; const tabIndexToRestore = tabs.findIndex( (tab) => tab instanceof HTMLAnchorElement && tab.textContent?.trim() === label ); const panels = starlightTabs?.querySelectorAll(':scope > \[role="tabpanel"\]'); const newTab = tabs\[tabIndexToRestore\]; const newPanel = panels\[tabIndexToRestore\]; if (tabIndexToRestore < 1 || !newTab || !newPanel) return; tabs\[0\]?.setAttribute('aria-selected', 'false'); tabs\[0\]?.setAttribute('tabindex', '-1'); panels?.\[0\]?.setAttribute('hidden', 'true'); newTab.removeAttribute('tabindex'); newTab.setAttribute('aria-selected', 'true'); newPanel.removeAttribute('hidden'); } } customElements.define('starlight-tabs-restore', StarlightTabsRestore); })()

*   [npm](#tab-panel-3277)
*   [pnpm](#tab-panel-3278)
*   [Yarn](#tab-panel-3279)

Terminal window

    npx astro add sitemap

Terminal window

    pnpm astro add sitemap

Terminal window

    yarn astro add sitemap

class r extends HTMLElement{static#e=new Map;#t;#n="starlight-synced-tabs\_\_";constructor(){super();const t=this.querySelector('\[role="tablist"\]');if(this.tabs=\[...t.querySelectorAll('\[role="tab"\]')\],this.panels=\[...this.querySelectorAll(':scope > \[role="tabpanel"\]')\],this.#t=this.dataset.syncKey,this.#t){const i=r.#e.get(this.#t)??\[\];i.push(this),r.#e.set(this.#t,i)}this.tabs.forEach((i,c)=>{i.addEventListener("click",e=>{e.preventDefault();const n=t.querySelector('\[aria-selected="true"\]');e.currentTarget!==n&&this.switchTab(e.currentTarget,c)}),i.addEventListener("keydown",e=>{const n=this.tabs.indexOf(e.currentTarget),s=e.key==="ArrowLeft"?n-1:e.key==="ArrowRight"?n+1:e.key==="Home"?0:e.key==="End"?this.tabs.length-1:null;s!==null&&this.tabs\[s\]&&(e.preventDefault(),this.switchTab(this.tabs\[s\],s))})})}switchTab(t,i,c=!0){if(!t)return;const e=c?this.getBoundingClientRect().top:0;this.tabs.forEach(s=>{s.setAttribute("aria-selected","false"),s.setAttribute("tabindex","-1")}),this.panels.forEach(s=>{s.hidden=!0});const n=this.panels\[i\];n&&(n.hidden=!1),t.removeAttribute("tabindex"),t.setAttribute("aria-selected","true"),c&&(t.focus(),r.#r(this,t),window.scrollTo({top:window.scrollY+(this.getBoundingClientRect().top-e),behavior:"instant"}))}#i(t){!this.#t||typeof localStorage>"u"||localStorage.setItem(this.#n+this.#t,t)}static#r(t,i){const c=t.#t,e=r.#s(i);if(!c||!e)return;const n=r.#e.get(c);if(n){for(const s of n){if(s===t)continue;const a=s.tabs.findIndex(o=>r.#s(o)===e);a!==-1&&s.switchTab(s.tabs\[a\],a,!1)}t.#i(e)}}static#s(t){return t.textContent?.trim()}}customElements.define("starlight-tabs",r);

If you run into any issues, [feel free to report them to us on GitHub](https://github.com/withastro/astro/issues) and try the manual installation steps below.

### Manual Install

[Section titled Manual Install](#manual-install)

First, install the `@astrojs/sitemap` package using your package manager.

*   [npm](#tab-panel-3280)
*   [pnpm](#tab-panel-3281)
*   [Yarn](#tab-panel-3282)

Terminal window

    npm install @astrojs/sitemap

Terminal window

    pnpm add @astrojs/sitemap

Terminal window

    yarn add @astrojs/sitemap

Then, apply the integration to your `astro.config.*` file using the `integrations` property:

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  // ...  integrations: [sitemap()],});

Usage
-----

[Section titled Usage](#usage)

`@astrojs/sitemap` needs to know your site’s deployed URL to generate a sitemap.

Add your site’s URL as the [`site`](/en/reference/configuration-reference/#site) option in `astro.config.mjs`. This must begin with `http://` or `https://`.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [sitemap()],  // ...});

With the sitemap integration configured, `sitemap-index.xml` and `sitemap-0.xml` files will be added to your output directory when building your site.

`sitemap-index.xml` links to all the numbered sitemap files. `sitemap-0.xml` lists the pages on your site. For extremely large sites, there may also be additional numbered files like `sitemap-1.xml` and `sitemap-2.xml`.

Example of generated files for a two-page website

sitemap-index.xml

    <?xml version="1.0" encoding="UTF-8"?>  <sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">  <sitemap>    <loc>https://stargazers.club/sitemap-0.xml</loc>  </sitemap></sitemapindex>

sitemap-0.xml

    <?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1">  <url>    <loc>https://stargazers.club/</loc>  </url>  <url>    <loc>https://stargazers.club/second-page/</loc>  </url></urlset>

### Sitemap discovery

[Section titled Sitemap discovery](#sitemap-discovery)

You can make it easier for crawlers to find your sitemap with links in your site’s `<head>` and `robots.txt` file.

#### Sitemap link in `<head>`

[Section titled Sitemap link in &lt;head&gt;](#sitemap-link-in-head)

Add a `<link rel="sitemap">` element to your site’s `<head>` pointing to the sitemap index file:

src/layouts/Layout.astro

    <head>  <link rel="sitemap" href="/sitemap-index.xml" /></head>

#### Sitemap link in `robots.txt`

[Section titled Sitemap link in robots.txt](#sitemap-link-in-robotstxt)

If you have a `robots.txt` for your website, you can add the URL for the sitemap index to help crawlers:

public/robots.txt

    User-agent: *Allow: /
    Sitemap: https://<YOUR SITE>/sitemap-index.xml

If you want to reuse the `site` value from `astro.config.mjs`, you can also generate `robots.txt` dynamically. Instead of using a static file in the `public/` directory, create a `src/pages/robots.txt.ts` file and add the following code:

src/pages/robots.txt.ts

    import type { APIRoute } from 'astro';
    const getRobotsTxt = (sitemapURL: URL) => `User-agent: *Allow: /
    Sitemap: ${sitemapURL.href}`;
    export const GET: APIRoute = ({ site }) => {  const sitemapURL = new URL('sitemap-index.xml', site);  return new Response(getRobotsTxt(sitemapURL));};

Configuration
-------------

[Section titled Configuration](#configuration)

To configure this integration, pass an object to the `sitemap()` function in `astro.config.mjs`.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  integrations: [    sitemap({      // configuration options    }),  ],});

### filter

[Section titled filter](#filter)

All pages are included in your sitemap by default. By adding a custom `filter` function, you can filter included pages by URL.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filter: (page) => page !== 'https://stargazers.club/secret-vip-lounge/',    }),  ],});

The function will be called for every page on your site. The `page` function parameter is the full URL of the page currently under consideration, including your `site` domain. Return `true` to include the page in your sitemap, and `false` to leave it out.

To filter multiple pages, add arguments with target URLs.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filter: (page) =>        page !== 'https://stargazers.club/secret-vip-lounge-1/' &&        page !== 'https://stargazers.club/secret-vip-lounge-2/' &&        page !== 'https://stargazers.club/secret-vip-lounge-3/' &&        page !== 'https://stargazers.club/secret-vip-lounge-4/',    }),  ],});

### customPages

[Section titled customPages](#custompages)

In some cases, a page might be part of your deployed site but not part of your Astro project. If you’d like to include a page in your sitemap that _isn’t_ created by Astro, you can use this option.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      customPages: ['https://stargazers.club/external-page', 'https://stargazers.club/external-page2'],    }),  ],});

### entryLimit

[Section titled entryLimit](#entrylimit)

The maximum number entries per sitemap file. The default value is 45000. A sitemap index and multiple sitemaps are created if you have more entries. See this [explanation of splitting up a large sitemap](https://developers.google.com/search/docs/advanced/sitemaps/large-sitemaps).

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      entryLimit: 10000,    }),  ],});

### changefreq, lastmod, and priority

[Section titled changefreq, lastmod, and priority](#changefreq-lastmod-and-priority)

These options correspond to the `<changefreq>`, `<lastmod>`, and `<priority>` tags in the [Sitemap XML specification.](https://www.sitemaps.org/protocol.html)

Note that `changefreq` and `priority` are ignored by Google.

Note

Due to limitations of Astro’s [Integration API](/en/reference/integrations-reference/), this integration can’t analyze a given page’s source code. This configuration option can set `changefreq`, `lastmod` and `priority` on a _site-wide_ basis; see the next option **serialize** for how you can set these values on a per-page basis.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      changefreq: 'weekly',      priority: 0.7,      lastmod: new Date('2022-02-24'),    }),  ],});

### serialize

[Section titled serialize](#serialize)

A function called for each sitemap entry just before writing to a disk. This function can be asynchronous.

It receives as its parameter a `SitemapItem` object that can have these properties:

*   `url` (absolute page URL). This is the only property that is guaranteed to be on `SitemapItem`.
*   `changefreq`
*   `lastmod` (ISO formatted date, `String` type)
*   `priority`
*   `links`.

This `links` property contains a `LinkItem` list of alternate pages including a parent page.

The `LinkItem` type has two fields: `url` (the fully-qualified URL for the version of this page for the specified language) and `lang` (a supported language code targeted by this version of the page).

The `serialize` function should return `SitemapItem`, touched or not.

The example below shows the ability to add sitemap specific properties individually.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      serialize(item) {        if (/exclude-from-sitemap/.test(item.url)) {          return undefined;        }        if (/your-special-page/.test(item.url)) {          item.changefreq = 'daily';          item.lastmod = new Date();          item.priority = 0.9;        }        return item;      },    }),  ],});

### i18n

[Section titled i18n](#i18n)

To localize a sitemap, pass an object to this `i18n` option.

This object has two required properties:

*   `defaultLocale`: `String`. Its value must exist as one of `locales` keys.
*   `locales`: `Record<String, String>`, key/value - pairs. The key is used to look for a locale part in a page path. The value is a language attribute, only English alphabet and hyphen allowed.

[Read more about language attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang).

[Read more about localization](https://developers.google.com/search/docs/advanced/crawling/localized-versions#all-method-guidelines).

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      i18n: {        defaultLocale: 'en', // All urls that don't contain `es` or `fr` after `https://stargazers.club/` will be treated as default locale, i.e. `en`        locales: {          en: 'en-US', // The `defaultLocale` value must present in `locales` keys          es: 'es-ES',          fr: 'fr-CA',        },      },    }),  ],});

The resulting sitemap looks like this:

sitemap-0.xml

    ...  <url>    <loc>https://stargazers.club/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/es/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/fr/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/es/second-page/</loc>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/second-page/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/second-page/"/>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/second-page/"/>  </url>...

### xslURL

[Section titled xslURL](#xslurl)

The URL of an XSL stylesheet to style and prettify your sitemap.

The value set can be either a path relative to your configured `site` URL for a local stylesheet, or can be an absolute URL link to an external stylesheet.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://example.com',  integrations: [    sitemap({      xslURL: '/sitemap.xsl'    }),  ],});

### filenameBase

[Section titled filenameBase](#filenamebase)

The name prefix string used when generating the sitemap XML files. The default value is `sitemap`.

This option may be useful when integrating an Astro site into a domain with preexisting sitemap files.

astro.config.mjs

    import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';
    export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filenameBase: 'astronomy-sitemap'    }),  ],});

The given configuration will generate sitemap files at `https://stargazers.club/astronomy-sitemap-0.xml` and `https://stargazers.club/astronomy-sitemap-index.xml`.

Examples
--------

[Section titled Examples](#examples)

*   The official Astro website uses Astro Sitemap to generate [its sitemap](https://astro.build/sitemap-index.xml).
*   [Browse projects with Astro Sitemap on GitHub](https://github.com/search?q=%22%40astrojs%2Fsitemap%22+path%3Apackage.json&type=Code) for more examples!

More integrations
-----------------

### Front-end frameworks

*   ![](/logos/alpine-js.svg)
    
    ### [@astrojs/alpinejs](/en/guides/integrations-guide/alpinejs/)
    
*   ![](/logos/preact.svg)
    
    ### [@astrojs/preact](/en/guides/integrations-guide/preact/)
    
*   ![](/logos/react.svg)
    
    ### [@astrojs/react](/en/guides/integrations-guide/react/)
    
*   ![](/logos/solid.svg)
    
    ### [@astrojs/solid⁠-⁠js](/en/guides/integrations-guide/solid-js/)
    
*   ![](/logos/svelte.svg)
    
    ### [@astrojs/svelte](/en/guides/integrations-guide/svelte/)
    
*   ![](/logos/vue.svg)
    
    ### [@astrojs/vue](/en/guides/integrations-guide/vue/)
    

### Adapters

*   ![](/logos/cloudflare-pages.svg)
    
    ### [@astrojs/cloudflare](/en/guides/integrations-guide/cloudflare/)
    
*   ![](/logos/netlify.svg)
    
    ### [@astrojs/netlify](/en/guides/integrations-guide/netlify/)
    
*   ![](/logos/node.svg)
    
    ### [@astrojs/node](/en/guides/integrations-guide/node/)
    
*   ![](/logos/vercel.svg)
    
    ### [@astrojs/vercel](/en/guides/integrations-guide/vercel/)
    

### Other integrations

*   ![](/logos/db.svg)
    
    ### [@astrojs/db](/en/guides/integrations-guide/db/)
    
*   ![](/logos/markdoc.svg)
    
    ### [@astrojs/markdoc](/en/guides/integrations-guide/markdoc/)
    
*   ![](/logos/mdx.svg)
    
    ### [@astrojs/mdx](/en/guides/integrations-guide/mdx/)
    
*   ![](/logos/partytown.svg)
    
    ### [@astrojs/partytown](/en/guides/integrations-guide/partytown/)
    
*   ![](/logos/sitemap.svg)
    
    ### [@astrojs/sitemap](/en/guides/integrations-guide/sitemap/)
    

Learn

![](/_astro/CodingInPublic.DpaYu7Qd_5sx41.webp)

Learn Astro with **Coding in Public**
-------------------------------------

150+ video lessons • Astro v5 ready

[Get 20% off](https://learnastro.dev?code=ASTRO_PROMO)

document.querySelectorAll("a\[data-learn-astro-cta\]").forEach(a=>a.addEventListener("click",()=>{window.fathom?.trackEvent("Docs: Coding in Public campaign click")}));

[Edit page](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/integrations-guide/sitemap.mdx) [Translate this page](https://contribute.docs.astro.build/guides/i18n/)

[Previous  
Partytown](/en/guides/integrations-guide/partytown/) [Next  
Publish to NPM](/en/reference/publish-to-npm/)

[Contribute](/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)